!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.sortable=t()}(this,function(){"use strict";var e,t,n=[],r=function(e,t,n){if(void 0===n)return e&&e.h5s&&e.h5s.data&&e.h5s.data[t];e.h5s=e.h5s||{},e.h5s.data=e.h5s.data||{},e.h5s.data[t]=n},a=function(e,t){return(e.matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.oMatchesSelector).call(e,t)},o=function(e,t){if(!t)return Array.prototype.slice.call(e);for(var n=[],r=0;r<e.length;++r)"string"==typeof t&&a(e[r],t)&&n.push(e[r]),-1!==t.indexOf(e[r])&&n.push(e[r]);return n},i=function(e,t,n){if(e instanceof Array)for(var r=0;r<e.length;++r)i(e[r],t,n);else e.addEventListener(t,n),e.h5s=e.h5s||{},e.h5s.events=e.h5s.events||{},e.h5s.events[t]=n},s=function(e,t){if(e instanceof Array)for(var n=0;n<e.length;++n)s(e[n],t);else e.h5s&&e.h5s.events&&e.h5s.events[t]&&(e.removeEventListener(t,e.h5s.events[t]),delete e.h5s.events[t])},l=function(e,t,n){if(e instanceof Array)for(var r=0;r<e.length;++r)l(e[r],t,n);else e.setAttribute(t,n)},d=function(e,t){if(e instanceof Array)for(var n=0;n<e.length;++n)d(e[n],t);else e.removeAttribute(t)},c=function(e){var t=e.getClientRects()[0];return{left:t.left+window.scrollX,top:t.top+window.scrollY}},f=function(e){s(e,"dragstart"),s(e,"dragend"),s(e,"selectstart"),s(e,"dragover"),s(e,"dragenter"),s(e,"drop")},p=function(e){s(e,"dragover"),s(e,"dragenter"),s(e,"drop")},u=function(e,t){var n,r,a,o,i={draggedItem:t};n=e,(r=i).x||(r.x=parseInt(n.pageX-c(r.draggedItem).left)),r.y||(r.y=parseInt(n.pageY-c(r.draggedItem).top)),o=i=r,(a=e).dataTransfer.effectAllowed="copyMove",a.dataTransfer.setData("text","arbitrary-content"),a.dataTransfer.setDragImage&&a.dataTransfer.setDragImage(o.draggedItem,o.x,o.y)},h=function(e,t){var n=r(e,"opts").acceptFrom;return null!==n?!1!==n&&n.split(",").filter(function(e){return e.length>0&&a(t,e)}).length>0:e===t||void 0!==r(e,"connectWith")&&r(e,"connectWith")===r(t,"connectWith")},m=function(e){return!0===r(e,"opts").copy},g=function(e,t){var n,r=[];if(!t)return e;for(var a=0;a<e.length;++a)n=e[a].querySelectorAll(t),r=r.concat(Array.prototype.slice.call(n));return r},v=function(e){var t,n,a,i=r(e,"opts")||{},l=o(C(e),i.items),c=g(l,i.handle);p(e),(n=t=e).h5s&&delete n.h5s.data,d(t,"aria-dropeffect"),s(c,"mousedown"),f(l),d(a=l,"aria-grabbed"),d(a,"aria-copied"),d(a,"draggable"),d(a,"role")},y=function(e){var t=r(e,"opts"),n=o(C(e),t.items),a=g(n,t.handle);l(e,"aria-dropeffect","move"),r(e,"_disabled","false"),l(a,"draggable","true"),"function"!=typeof(document||window.document).createElement("span").dragDrop||t.disableIEFix||i(a,"mousedown",function(){if(-1!==n.indexOf(this))this.dragDrop();else{for(var e=this.parentElement;-1===n.indexOf(e);)e=e.parentElement;e.dragDrop()}})},b=function(e){return e.parentElement?Array.prototype.indexOf.call(e.parentElement.children,e):0},E=function(e){return!!e.parentNode},x=function(e,t){e.parentElement.insertBefore(t,e.nextElementSibling)},w=function(e){e.parentNode&&e.parentNode.removeChild(e)},I=function(e,t){var n=document.createEvent("Event");return t&&(n.detail=t),n.initEvent(e,!1,!0),n};var C=function(e){return e.children},A=function(e){return o(C(e),r(e,"items"))},S=function(d,v){var D=String(v);if((v=function(e){var t={connectWith:!1,acceptFrom:null,copy:!1,placeholder:null,disableIEFix:!1,placeholderClass:"sortable-placeholder",draggingClass:"sortable-dragging",hoverClass:!1,debounce:0,maxItems:0};for(var n in e)t[n]=e[n];return t}(v))&&"function"==typeof v.getChildren&&(C=v.getChildren),"string"==typeof d&&(d=document.querySelectorAll(d)),d instanceof window.Element&&(d=[d]),d=Array.prototype.slice.call(d),/serialize/.test(D)){var L=[];return d.forEach(function(e){L.push({list:e,children:A(e)})}),L}return d.forEach(function(d){if(/enable|disable|destroy/.test(D))return S[D](d);var L,O,T,F;v=r(d,"opts")||v,r(d,"opts",v),O=r(L=d,"opts"),T=o(C(L),O.items),F=g(T,O.handle),r(L,"_disabled","false"),f(T),s(F,"mousedown"),p(L);var W,M,N,P,_=o(C(d),v.items),z=v.placeholder;if(z||(z=document.createElement(/^ul|ol$/i.test(d.tagName)?"li":"div")),(z=function(e,t){if("string"!=typeof e)return e;var n=document.createElement(t);return n.innerHTML=e,n.firstChild}(z,d.tagName)).classList.add.apply(z.classList,v.placeholderClass.split(" ")),r(d,"items",v.items),n.push(z),v.acceptFrom?r(d,"acceptFrom",v.acceptFrom):v.connectWith&&r(d,"connectWith",v.connectWith),y(d),l(_,"role","option"),l(_,"aria-grabbed","false"),v.hoverClass){var Y="sortable-over";"string"==typeof v.hoverClass&&(Y=v.hoverClass),i(_,"mouseenter",function(){this.classList.add(Y)}),i(_,"mouseleave",function(){this.classList.remove(Y)})}v.maxItems&&"number"==typeof v.maxItems&&(P=v.maxItems),i(_,"dragstart",function(n){var r,o;(n.stopImmediatePropagation(),v.handle&&!a(n.target,v.handle)||"false"===this.getAttribute("draggable"))||(u(n,this),this.classList.add(v.draggingClass),o=r=this,m(d)&&(o=r.cloneNode(!0),l(o,"aria-copied","true"),r.parentElement.appendChild(o),o.style.display="none",o.oldDisplay=r.style.display),l(e=o,"aria-grabbed","true"),W=b(e),t=parseInt(window.getComputedStyle(e).height),M=this.parentElement,N=A(M),d.dispatchEvent(I("sortstart",{item:e,placeholder:z,startparent:M})))}),i(_,"dragend",function(){var a;e&&(e.classList.remove(v.draggingClass),l(e,"aria-grabbed","false"),"true"===e.getAttribute("aria-copied")&&"true"!==r(e,"dropped")&&w(e),e.style.display=e.oldDisplay,delete e.oldDisplay,n.forEach(w),a=this.parentElement,h(a,M)&&(d.dispatchEvent(I("sortstop",{item:e,startparent:M})),W===b(e)&&M===a||d.dispatchEvent(I("sortupdate",{item:e,index:o(C(a),r(a,"items")).indexOf(e),oldindex:_.indexOf(e),elementIndex:b(e),oldElementIndex:W,startparent:M,endparent:a,newEndList:A(a),newStartList:A(M),oldStartList:N}))),e=null,t=null)}),i([d,z],"drop",function(t){var a;h(d,e.parentElement)&&(t.preventDefault(),t.stopPropagation(),r(e,"dropped","true"),a=n.filter(E)[0],x(a,e))});var q,B,X,j,k=(q=function(r,a){var i,s;if(e)if(-1!==_.indexOf(r)){var l=parseInt(window.getComputedStyle(r).height),d=b(z),f=b(r);if(v.forcePlaceholderSize&&(z.style.height=t+"px"),l>t){var p=l-t,u=c(r).top;if(d<f&&a<u+p)return;if(d>f&&a>u+l-p)return}void 0===e.oldDisplay&&(e.oldDisplay=e.style.display),"none"!==e.style.display&&(e.style.display="none"),d<f?x(r,z):(s=z,(i=r).parentElement.insertBefore(s,i)),n.filter(function(e){return e!==z}).forEach(w)}else-1!==n.indexOf(r)||o(C(r),v.items).length||(n.forEach(w),r.appendChild(z))},B=v.debounce,j=null,0===B?q:function(){var e=X||this,t=arguments;clearTimeout(j),j=setTimeout(function(){q.apply(e,t)},B)}),H=function(t){e&&h(d,e.parentElement)&&"true"!==r(d,"_disabled")&&(P&&o(C(d),r(d,"items")).length>=P||(t.preventDefault(),t.stopPropagation(),t.dataTransfer.dropEffect=m(d)?"copy":"move",k(this,t.pageY)))};i(_.concat(d),"dragover",H),i(_.concat(d),"dragenter",H)}),d};return S.destroy=function(e){v(e)},S.enable=function(e){y(e)},S.disable=function(e){var t,n,a,i;n=r(t=e,"opts"),a=o(C(t),n.items),i=g(a,n.handle),l(t,"aria-dropeffect","none"),r(t,"_disabled","true"),l(i,"draggable","false"),s(i,"mousedown")},S});
//# sourceMappingURL=html.sortable.min.js.map
