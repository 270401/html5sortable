!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.sortable=t()}(this,function(){"use strict";var e,t,n=[],r=[],a=function(e,t,n){if(void 0===n)return e&&e.h5s&&e.h5s.data&&e.h5s.data[t];e.h5s=e.h5s||{},e.h5s.data=e.h5s.data||{},e.h5s.data[t]=n},o=function(e,t){return(e.matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.oMatchesSelector).call(e,t)},i=function(e,t){if(!t)return Array.prototype.slice.call(e);for(var n=[],r=0;r<e.length;++r)"string"==typeof t&&o(e[r],t)&&n.push(e[r]),-1!==t.indexOf(e[r])&&n.push(e[r]);return n},s=function(e,t,n){if(e instanceof Array)for(var r=0;r<e.length;++r)s(e[r],t,n);else e.addEventListener(t,n),e.h5s=e.h5s||{},e.h5s.events=e.h5s.events||{},e.h5s.events[t]=n},l=function(e,t){if(e instanceof Array)for(var n=0;n<e.length;++n)l(e[n],t);else e.h5s&&e.h5s.events&&e.h5s.events[t]&&(e.removeEventListener(t,e.h5s.events[t]),delete e.h5s.events[t])},d=function(e,t,n){if(e instanceof Array)for(var r=0;r<e.length;++r)d(e[r],t,n);else e.setAttribute(t,n)},c=function(e,t){if(e instanceof Array)for(var n=0;n<e.length;++n)c(e[n],t);else e.removeAttribute(t)},f=function(e){var t=e.getClientRects()[0];return{left:t.left+window.scrollX,top:t.top+window.scrollY}},p=function(e){l(e,"dragstart"),l(e,"dragend"),l(e,"selectstart"),l(e,"dragover"),l(e,"dragenter"),l(e,"drop")},u=function(e){l(e,"dragover"),l(e,"dragenter"),l(e,"drop")},h=function(e,t){var n,r,a,o,i={draggedItem:t};n=e,(r=i).x||(r.x=parseInt(n.pageX-f(r.draggedItem).left)),r.y||(r.y=parseInt(n.pageY-f(r.draggedItem).top)),o=i=r,(a=e).dataTransfer.effectAllowed="copyMove",a.dataTransfer.setData("text","arbitrary-content"),a.dataTransfer.setDragImage&&a.dataTransfer.setDragImage(o.draggedItem,o.x,o.y)},g=function(e,t){var n=a(e,"opts").acceptFrom;return null!==n?!1!==n&&n.split(",").filter(function(e){return e.length>0&&o(t,e)}).length>0:e===t||void 0!==a(e,"connectWith")&&a(e,"connectWith")===a(t,"connectWith")},m=function(e){return!0===a(e,"opts").copy},v=function(e,t){var n,r=[];if(!t)return e;for(var a=0;a<e.length;++a)n=e[a].querySelectorAll(t),r=r.concat(Array.prototype.slice.call(n));return r},y=function(e){var t,n,r,o=a(e,"opts")||{},s=i(S(e),o.items),d=v(s,o.handle);u(e),(n=t=e).h5s&&delete n.h5s.data,c(t,"aria-dropeffect"),l(d,"mousedown"),p(s),c(r=s,"aria-grabbed"),c(r,"aria-copied"),c(r,"draggable"),c(r,"role")},b=function(e){var t=a(e,"opts"),n=i(S(e),t.items),r=v(n,t.handle);d(e,"aria-dropeffect","move"),a(e,"_disabled","false"),d(r,"draggable","true"),"function"!=typeof(document||window.document).createElement("span").dragDrop||t.disableIEFix||s(r,"mousedown",function(){if(-1!==n.indexOf(this))this.dragDrop();else{for(var e=this.parentElement;-1===n.indexOf(e);)e=e.parentElement;e.dragDrop()}})},E=function(e){return e.parentElement?Array.prototype.indexOf.call(e.parentElement.children,e):0},x=function(e){return!!e.parentNode},w=function(e,t){e.parentElement.insertBefore(t,e.nextElementSibling)},I=function(e){e.parentNode&&e.parentNode.removeChild(e)},C=function(e,t){var n=document.createEvent("Event");return t&&(n.detail=t),n.initEvent(e,!1,!0),n},A=function(e,t){r.forEach(function(n){g(e,n)&&n.dispatchEvent(t)})};var S=function(e){return e.children},D=function(e){return i(S(e),a(e,"items"))},L=function(c,y){var O=String(y);if((y=function(e){var t={connectWith:!1,acceptFrom:null,copy:!1,placeholder:null,disableIEFix:!1,placeholderClass:"sortable-placeholder",draggingClass:"sortable-dragging",hoverClass:!1,debounce:0,maxItems:0};for(var n in e)t[n]=e[n];return t}(y))&&"function"==typeof y.getChildren&&(S=y.getChildren),"string"==typeof c&&(c=document.querySelectorAll(c)),c instanceof window.Element&&(c=[c]),c=Array.prototype.slice.call(c),/serialize/.test(O)){var T=[];return c.forEach(function(e){T.push({list:e,children:D(e)})}),T}return c.forEach(function(c){if(/enable|disable|destroy/.test(O))return L[O](c);var T,F,W,M;y=a(c,"opts")||y,a(c,"opts",y),F=a(T=c,"opts"),W=i(S(T),F.items),M=v(W,F.handle),a(T,"_disabled","false"),p(W),l(M,"mousedown"),u(T);var N,P,_,z,Y=i(S(c),y.items),q=y.placeholder;if(q||(q=document.createElement(/^ul|ol$/i.test(c.tagName)?"li":"div")),(q=function(e,t){if("string"!=typeof e)return e;var n=document.createElement(t);return n.innerHTML=e,n.firstChild}(q,c.tagName)).classList.add.apply(q.classList,y.placeholderClass.split(" ")),!c.getAttribute("data-sortable-id")){var B=r.length;r[B]=c,d(c,"data-sortable-id",B),d(Y,"data-item-sortable-id",B)}if(a(c,"items",y.items),n.push(q),y.acceptFrom?a(c,"acceptFrom",y.acceptFrom):y.connectWith&&a(c,"connectWith",y.connectWith),b(c),d(Y,"role","option"),d(Y,"aria-grabbed","false"),y.hoverClass){var X="sortable-over";"string"==typeof y.hoverClass&&(X=y.hoverClass),s(Y,"mouseenter",function(){this.classList.add(X)}),s(Y,"mouseleave",function(){this.classList.remove(X)})}y.maxItems&&"number"==typeof y.maxItems&&(z=y.maxItems),s(Y,"dragstart",function(n){var r,a;(n.stopImmediatePropagation(),y.handle&&!o(n.target,y.handle)||"false"===this.getAttribute("draggable"))||(h(n,this),this.classList.add(y.draggingClass),a=r=this,m(c)&&(a=r.cloneNode(!0),d(a,"aria-copied","true"),r.parentElement.appendChild(a),a.style.display="none",a.oldDisplay=r.style.display),d(e=a,"aria-grabbed","true"),N=E(e),t=parseInt(window.getComputedStyle(e).height),P=this.parentElement,_=D(P),A(c,C("sortstart",{item:e,placeholder:q,startparent:P})))}),s(Y,"dragend",function(){var r;e&&(e.classList.remove(y.draggingClass),d(e,"aria-grabbed","false"),"true"===e.getAttribute("aria-copied")&&"true"!==a(e,"dropped")&&I(e),e.style.display=e.oldDisplay,delete e.oldDisplay,n.forEach(I),r=this.parentElement,A(c,C("sortstop",{item:e,startparent:P})),N===E(e)&&P===r||A(c,C("sortupdate",{item:e,index:i(S(r),a(r,"items")).indexOf(e),oldindex:Y.indexOf(e),elementIndex:E(e),oldElementIndex:N,startparent:P,endparent:r,newEndList:D(r),newStartList:D(P),oldStartList:_})),e=null,t=null)}),s([c,q],"drop",function(t){var r;g(c,e.parentElement)&&(t.preventDefault(),t.stopPropagation(),a(e,"dropped","true"),r=n.filter(x)[0],w(r,e),e.dispatchEvent(C("dragend")))});var j,k,H,R,$=(j=function(r,a){var o,s;if(e)if(-1!==Y.indexOf(r)){var l=parseInt(window.getComputedStyle(r).height),d=E(q),c=E(r);if(y.forcePlaceholderSize&&(q.style.height=t+"px"),l>t){var p=l-t,u=f(r).top;if(d<c&&a<u+p)return;if(d>c&&a>u+l-p)return}void 0===e.oldDisplay&&(e.oldDisplay=e.style.display),"none"!==e.style.display&&(e.style.display="none"),d<c?w(r,q):(s=q,(o=r).parentElement.insertBefore(s,o)),n.filter(function(e){return e!==q}).forEach(I)}else-1!==n.indexOf(r)||i(S(r),y.items).length||(n.forEach(I),r.appendChild(q))},k=y.debounce,R=null,0===k?j:function(){var e=H||this,t=arguments;clearTimeout(R),R=setTimeout(function(){j.apply(e,t)},k)}),G=function(t){e&&g(c,e.parentElement)&&"true"!==a(c,"_disabled")&&(z&&i(S(c),a(c,"items")).length>=z||(t.preventDefault(),t.stopPropagation(),t.dataTransfer.dropEffect=m(c)?"copy":"move",$(this,t.pageY)))};s(Y.concat(c),"dragover",G),s(Y.concat(c),"dragenter",G)}),c};return L.destroy=function(e){y(e)},L.enable=function(e){b(e)},L.disable=function(e){var t,n,r,o;n=a(t=e,"opts"),r=i(S(t),n.items),o=v(r,n.handle),d(t,"aria-dropeffect","none"),a(t,"_disabled","true"),d(o,"draggable","false"),l(o,"mousedown")},L});
//# sourceMappingURL=html.sortable.min.js.map
